<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="main.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<script>
src="https://code.jquery.com/jquery-3.5.1.min.js"
integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
crossorigin="anonymous"></script>
<html>

<head>
<title>Prelinger TV</title>
</head>
<body>
    
<div class="container">

    <h1>Prelinger TV</h1>
<iframe class="responsive-iframe" id="tv-player" src="https://archive.org/download/0194_Two_Pay_Days_13_27_12_00/0194_Two_Pay_Days_13_27_12_00.mp4" frameborder="0" width = "100%" height="100%" allowfullscreen="allowfullscreen"></iframe>
<br>

<!-- <button type="button" class="btn" id="back"><i class="fa fa-fast-backward"></i></button>
<button type="button" class="btn" onclick="play()"id="play"> <i class="fa fa-play"></i> </button>
<button type="button" class="btn" onclick="stop()"id="stop"> <i class="fa fa-stop"></i> </button>
<button type="button" class="btn" onclick="next()"id="next"><i class="fa fa-fast-forward"></i></button> -->
<button type="button" class="btn" onclick="changeMovie()" id="refresh"><i class="fa fa-refresh"></i> </button>

</div>
</body>


<script>
// const data = ("prelinger31.json")

function fetchJSONFile(path, callback) {
    var httpRequest = new XMLHttpRequest();
    httpRequest.onreadystatechange = function() {
        if (httpRequest.readyState === 4) {
            if (httpRequest.status === 200) {
                var data = JSON.parse(httpRequest.responseText);
                if (callback) callback(data);
            }
        }
    };
    httpRequest.open('GET', path);
    httpRequest.send(); 
}

// this requests the file and executes a callback with the parsed result once
//   it is available
window.onload = function(){
fetchJSONFile('prelinger31.json', function(data){
    // do something with your data
    console.log(data);
    const JSONObject = JSON.parse(data);
    key = (Object.keys(JSONObject))
    values = (Object.values(JSONObject))
    changeMovie()

})
};

function changeMovie(){
    var randomnumber = Math.floor(Math.random() * (key.length))
    var new_src = ((values[randomnumber]))
    document.getElementById('tv-player').src = new_src
    console.log("changing the movie")
}

// function resizeIframe(obj) {
//     obj.style.height = obj.contentWindow.document.documentElement.scrollHeight + 'px';
//   }
</script>
</html> 